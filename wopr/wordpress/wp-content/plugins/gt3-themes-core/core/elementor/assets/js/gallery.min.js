/*!
 Version: 1.0
 Author: GT3 Themes
 Website: https//gt3themes.com
 */
(function(a){if(typeof define==="function"&&define.amd){define(["./helper"],a)}else{window.blueimp=window.blueimp||{};window.blueimp.ElementorGallery=a(window.blueimp.helper||window.jQuery)}})(function(b){function a(d,c){if(document.body.style.maxHeight===undefined){return null}if(!this||this.options!==a.prototype.options){return new a(d,c)}if(!d||!d.length){this.console.log("Gallery: No or empty list provided as first argument.",d);return}this.list=d;this.num=d.length;this.initOptions(c);this.initialize()}b.extend(a.prototype,{options:{container:"#gt3pg_gallery_wrap",slidesContainer:".gt3pg_slides",titleElement:".gt3pg_title",descriptionElement:".gt3pg_description",captionElement:".gt3pg_caption_current",captionElementAll:".gt3pg_caption_all",displayClass:"gt3pg_gallery_wrap-display",controlsClass:"gt3pg_wrap_controls",singleClass:"gt3pg_wrap_single",leftEdgeClass:"gt3pg_gallery_wrap-left",rightEdgeClass:"gt3pg_gallery_wrap-right",playingClass:"gt3pg_wrap_autoplay",slideClass:"gt3pg_slide",controlsButtonClass:"gt3pg_button_controls",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"gt3pg_toggle",prevClass:"gt3pg_prev",nextClass:"gt3pg_next",closeClass:"gt3pg_close",playPauseClass:"gt3pg_autoplay_button",typeProperty:"type",titleProperty:"title",urlProperty:"href",descriptionProperty:"description",srcsetProperty:"urlset",instance:false,displayTransition:true,clearSlides:true,stretchImages:false,toggleControlsOnReturn:true,toggleControlsOnSlideClick:true,toggleSlideshowOnSpace:false,enableKeyboardNavigation:true,closeOnEscape:true,closeOnSlideClick:false,closeOnSwipeUpOrDown:true,emulateTouchEvents:true,stopTouchEventsPropagation:false,hidePageScrollbars:true,disableScroll:true,carousel:false,continuous:true,unloadElements:true,startSlideshow:false,deepLink:false,slideshowInterval:4000,changingSlideClass:"changing-slide",index:0,preloadRange:1,transitionSpeed:800,slideshowTransitionSpeed:undefined,event:undefined,onopen:undefined,onopened:undefined,onslide:undefined,onslideend:undefined,onslidecomplete:undefined,onclose:undefined,onclosed:undefined},carouselOptions:{hidePageScrollbars:false,toggleControlsOnReturn:true,toggleSlideshowOnSpace:true,enableKeyboardNavigation:true,closeOnEscape:false,closeOnSlideClick:false,closeOnSwipeUpOrDown:false,disableScroll:false,startSlideshow:false},console:window.console&&typeof window.console.log==="function"?window.console:{log:function(){}},support:(function(c){var d={touch:window.ontouchstart!==undefined||(window.DocumentTouch&&document instanceof DocumentTouch)};var f={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};var g;for(g in f){if(f.hasOwnProperty(g)&&c.style[g]!==undefined){d.transition=f[g];d.transition.name=g;break}}function e(){var i=d.transition;var j;var h;document.body.appendChild(c);if(i){j=i.name.slice(0,-9)+"ransform";if(c.style[j]!==undefined){c.style[j]="translateZ(0)";h=window.getComputedStyle(c).getPropertyValue(i.prefix+"transform");d.transform={prefix:i.prefix,name:j,translate:true,translateZ:!!h&&h!=="none"}}}if(c.style.backgroundSize!==undefined){d.backgroundSize={};c.style.backgroundSize="contain";d.backgroundSize.contain=window.getComputedStyle(c).getPropertyValue("background-size")==="contain";c.style.backgroundSize="cover";d.backgroundSize.cover=window.getComputedStyle(c).getPropertyValue("background-size")==="cover"}document.body.removeChild(c)}if(document.body){e()}else{b(document).on("DOMContentLoaded",e)}return d})(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,cancelAnimationFrame:window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,initialize:function(){this.initStartIndex();if(this.initWidget()===false){return false}this.initEventListeners();this.onslide(this.index);this.ontransitionend();if(this.options.startSlideshow){this.play()}this.changingSlide(false);this.isMac=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)},changingSlide:function(c){if(c===true){this.container.addClass(this.options.changingSlideClass);this.changingSlideState=c}else{this.container.removeClass(this.options.changingSlideClass);this.changingSlideState=c}},slide:function(h,d){this.changingSlide(true);window.clearTimeout(this.timeout);var c=this.index;var f;var g;var e;if(c===h||this.num===1){return}if(!d){d=this.options.transitionSpeed}if(this.support.transform){if(!this.options.continuous){h=this.circle(h)}f=Math.abs(c-h)/(c-h);if(this.options.continuous){g=f;f=-this.positions[this.circle(h)]/this.slideWidth;if(f!==g){h=-f*this.num+h}}e=Math.abs(c-h)-1;while(e){e-=1;this.move(this.circle((h>c?h:c)-e-1),this.slideWidth*f,0)}h=this.circle(h);this.move(c,this.slideWidth*f,d);this.move(h,0,d);if(this.options.continuous){this.move(this.circle(h-f),-(this.slideWidth*f),0)}}else{h=this.circle(h);this.animate(c*-this.slideWidth,h*-this.slideWidth,d)}this.onslide(h)},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){if(this.options.continuous||this.index){this.slide(this.index-1)}},next:function(){if(this.options.continuous||this.index<this.num-1){this.slide(this.index+1)}},play:function(d){var c=this;window.clearTimeout(this.timeout);this.interval=d||this.options.slideshowInterval;if(this.elements[this.index]>1){this.timeout=this.setTimeout((!this.requestAnimationFrame&&this.slide)||function(f,e){c.animationFrameId=c.requestAnimationFrame.call(window,function(){c.slide(f,e)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval)}this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout);this.interval=null;if(this.cancelAnimationFrame){this.cancelAnimationFrame.call(window,this.animationFrameId);this.animationFrameId=null}this.container.removeClass(this.options.playingClass)},add:function(d){var c;if(!d.concat){d=Array.prototype.slice.call(d)}if(!this.list.concat){this.list=Array.prototype.slice.call(this.list)}this.list=this.list.concat(d);this.num=this.list.length;if(this.num>2&&this.options.continuous===null){this.options.continuous=true;this.container.removeClass(this.options.leftEdgeClass)}this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass);for(c=this.num-d.length;c<this.num;c+=1){this.addSlide(c);this.positionSlide(c)}this.positions.length=this.num;this.initSlides(true)},resetSlides:function(){this.slidesContainer.empty();this.unloadAllSlides();this.slides=[]},handleClose:function(){var c=this.options;this.destroyEventListeners();this.pause();this.container.removeClass(c.displayClass).removeClass(c.singleClass).removeClass(c.leftEdgeClass).removeClass(c.rightEdgeClass);this.container[0].style.display="none";if(c.hidePageScrollbars){document.body.style.overflow=this.bodyOverflowStyle}if(this.options.clearSlides){this.resetSlides()}if(this.options.deepLink===true){if(typeof history.replaceState!=="undefined"){history.replaceState({},document.title,".")}}if(this.options.onclosed){this.options.onclosed.call(this)}},close:function(){var d=this;function c(e){if(e.target===d.container[0]){d.container.off(d.support.transition.end,c);d.handleClose()}}if(this.options.onclose){this.options.onclose.call(this)}if(this.support.transition&&this.options.displayTransition){this.container.on(this.support.transition.end,c);this.container.removeClass(this.options.displayClass)}else{this.handleClose()}},circle:function(c){return(this.num+c%this.num)%this.num},move:function(c,e,d){this.translateX(c,e,d);this.positions[c]=e},translate:function(e,c,i,g){var f=this.slides[e].style;var h=this.support.transition;var d=this.support.transform;f[h.name+"Duration"]=g+"ms";f[d.name]="translate("+c+"px, "+i+"px)"+(d.translateZ?" translateZ(0)":"")},translateX:function(d,c,e){this.translate(d,c,0,e)},translateY:function(c,e,d){this.translate(c,0,e,d)},animate:function(h,g,d){if(!d){this.slidesContainer[0].style.left=g+"px";return}var c=this;var f=new Date().getTime();var e=window.setInterval(function(){var i=new Date().getTime()-f;if(i>d){c.slidesContainer[0].style.left=g+"px";c.ontransitionend();window.clearInterval(e);return}c.slidesContainer[0].style.left=(g-h)*(Math.floor(i/d*100)/100)+h+"px"},4)},preventDefault:function(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}},stopPropagation:function(c){if(c.stopPropagation){c.stopPropagation()}else{c.cancelBubble=true}},onresize:function(){this.initSlides(true)},onsmartresize:function(){this.onresize()},onmousedown:function(c){if(c.which&&c.which===1&&c.target.nodeName!=="VIDEO"){c.preventDefault();(c.originalEvent||c).touches=[{pageX:c.pageX,pageY:c.pageY}];this.ontouchstart(c)}},onmousemove:function(c){if(this.touchStart){(c.originalEvent||c).touches=[{pageX:c.pageX,pageY:c.pageY}];this.ontouchmove(c)}},onmouseup:function(c){if(this.touchStart){this.ontouchend(c);delete this.touchStart}},onmouseout:function(c){if(this.touchStart){var e=c.target;var d=c.relatedTarget;if(!d||(d!==e&&!b.contains(e,d))){this.onmouseup(c)}}},ontouchstart:function(c){if(this.options.stopTouchEventsPropagation){this.stopPropagation(c)}var d=(c.originalEvent||c).touches[0];this.touchStart={x:d.pageX,y:d.pageY,time:Date.now()};this.isScrolling=undefined;this.touchDelta={}},ontouchmove:function(e){if(this.options.stopTouchEventsPropagation){this.stopPropagation(e)}var f=(e.originalEvent||e).touches[0];var h=(e.originalEvent||e).scale;var d=this.index;var c;var g;if(f.length>1||(h&&h!==1)){return}if(this.options.disableScroll){e.preventDefault()}this.touchDelta={x:f.pageX-this.touchStart.x,y:f.pageY-this.touchStart.y};c=this.touchDelta.x;if(this.isScrolling===undefined){this.isScrolling=this.isScrolling||Math.abs(c)<Math.abs(this.touchDelta.y)}if(!this.isScrolling){e.preventDefault();window.clearTimeout(this.timeout);if(this.options.continuous){g=[this.circle(d+1),d,this.circle(d-1)]}else{this.touchDelta.x=c=c/((!d&&c>0)||(d===this.num-1&&c<0)?Math.abs(c)/this.slideWidth+1:1);g=[d];if(d){g.push(d-1)}if(d<this.num-1){g.unshift(d+1)}}while(g.length){d=g.pop();this.translateX(d,c+this.positions[d],0)}}else{if(this.options.carousel){this.touchDelta.y=0}this.translateY(d,this.touchDelta.y+this.positions[d],0)}},ontouchend:function(c){if(this.options.stopTouchEventsPropagation){this.stopPropagation(c)}var k=this.index;var h=this.options.transitionSpeed;var g=this.slideWidth;var e=Number(Date.now()-this.touchStart.time)<250;var j=(e&&Math.abs(this.touchDelta.x)>20)||Math.abs(this.touchDelta.x)>g/2;var f=(!k&&this.touchDelta.x>0)||(k===this.num-1&&this.touchDelta.x<0);var p=!j&&this.options.closeOnSwipeUpOrDown&&((e&&Math.abs(this.touchDelta.y)>20)||Math.abs(this.touchDelta.y)>this.slideHeight/2);var m;var i;var o;var l;var n;if(this.options.continuous){f=false}if(j){h=(1-Math.abs(this.touchDelta.x)/g)*h;var d=(g-Math.abs(this.touchDelta.x))/Math.abs(this.touchDelta.x)*Number(Date.now()-this.touchStart.time);if(h>d){h=d}h=Math.ceil(h)}m=this.touchDelta.x<0?-1:1;if(!this.isScrolling){if(j&&!f){i=k+m;o=k-m;l=g*m;n=-g*m;if(this.options.continuous){this.move(this.circle(i),l,0);this.move(this.circle(k-2*m),n,0)}else{if(i>=0&&i<this.num){this.move(i,l,0)}}this.move(k,this.positions[k]+l,h);this.move(this.circle(o),this.positions[this.circle(o)]+l,h);k=this.circle(o);this.onslide(k)}else{if(this.options.continuous){this.move(this.circle(k-1),-g,h);this.move(k,0,h);this.move(this.circle(k+1),g,h)}else{if(k){this.move(k-1,-g,h)}this.move(k,0,h);if(k<this.num-1){this.move(k+1,g,h)}}}}else{if(p){this.close()}else{this.translateY(k,0,h)}}},ontouchcancel:function(c){if(this.touchStart){this.ontouchend(c);delete this.touchStart}},ontransitionend:function(d){var c=this.slides[this.index];if(!d||c===d.target){if(this.interval){this.play()}this.setTimeout(this.options.onslideend,[this.index,c])}},oncomplete:function(e){var f=e.target||e.srcElement;var d=f&&f.parentNode;var c;if(!f||!d){return}c=this.getNodeIndex(d);b(d).removeClass(this.options.slideLoadingClass);if(e.type==="error"){b(d).addClass(this.options.slideErrorClass);this.elements[c]=3}else{this.elements[c]=2}if(f.clientHeight>this.container[0].clientHeight){f.style.maxHeight=this.container[0].clientHeight}if(this.interval&&this.slides[this.index]===d){this.play()}this.setTimeout(this.options.onslidecomplete,[c,d])},onload:function(c){this.oncomplete(c)},onerror:function(c){this.oncomplete(c)},onkeydown:function(c){if(c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"){switch(c.which||c.keyCode){case 13:if(this.options.toggleControlsOnReturn){this.preventDefault(c);this.toggleControls()}break;case 27:if(this.options.closeOnEscape){this.close();c.stopImmediatePropagation()}break;case 32:if(this.options.toggleSlideshowOnSpace){this.preventDefault(c);this.toggleSlideshow()}break;case 37:if(this.options.enableKeyboardNavigation){this.preventDefault(c);this.prev()}break;case 39:if(this.options.enableKeyboardNavigation){this.preventDefault(c);this.next()}break}}},handleClick:function(f){var c=this.options;var g=f.target||f.srcElement;var e=g.parentNode;function d(h){return b(g).hasClass(h)||b(e).hasClass(h)}if(d(c.toggleClass)){this.preventDefault(f);this.toggleControls()}else{if(d(c.prevClass)){this.preventDefault(f);this.prev()}else{if(d(c.nextClass)){this.preventDefault(f);this.next()}else{if(d(c.closeClass)){this.preventDefault(f);this.close()}else{if(d(c.playPauseClass)){this.preventDefault(f);this.toggleSlideshow()}else{if(d(c.controlsButtonClass)){this.preventDefault(f);this.toggleControls()}else{if(e===this.slidesContainer[0]){if(c.closeOnSlideClick){this.preventDefault(f);this.close()}else{if(c.toggleControlsOnSlideClick){this.preventDefault(f);this.toggleControls()}}}else{if(e.parentNode&&e.parentNode===this.slidesContainer[0]){if(c.toggleControlsOnSlideClick){this.preventDefault(f);this.toggleControls()}}}}}}}}}},onclick:function(c){if(this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)){delete this.touchDelta;return}return this.handleClick(c)},updateEdgeClasses:function(c){if(!c){this.container.addClass(this.options.leftEdgeClass)}else{this.container.removeClass(this.options.leftEdgeClass)}if(c===this.num-1){this.container.addClass(this.options.rightEdgeClass)}else{this.container.removeClass(this.options.rightEdgeClass)}},changeUrl:function(c){if(typeof(history.replaceState)!=="undefined"){history.replaceState(undefined,undefined,c)}else{}},getFileName:function(d){var c=null;if(this.list[d].href!==null){c=this.list[d].href}else{if(this.list[d].thumbnail!==null){c=this.list[d].thumbnail}}return c===null?"":c.substring(c.lastIndexOf("/")+1)},handleSlide:function(c){if(!this.options.continuous){this.updateEdgeClasses(c)}this.loadElements(c);if(this.options.unloadElements){this.unloadElements(c)}this.setTitle(c);this.setDescription(c)},onslide:function(d){this.prevIndex=this.index;this.index=d;if(this.options.instance!==false&&this.options.deepLink===true&&this.options.carousel===false){var c="#"+this.options.instance+"/"+d;this.changeUrl(c)}this.handleSlide(d);this.setTimeout(this.options.onslide,[d,this.slides[d]]);if(d<9){this.captionElement.html("0"+(d+1))}else{this.captionElement.html(d+1)}this.changingSlide(true);this.setTimeout(function(){this.changingSlide(false)},false,this.options.transitionSpeed)},setTitle:function(c){if(this.options.titleProperty in this.list[c]){if(this.titleElement.length){this.titleElement.html(this.list[c][this.options.titleProperty])}}},setDescription:function(c){if(this.options.descriptionProperty in this.list[c]){if(this.descriptionElement.length){this.descriptionElement.html(this.list[c][this.options.descriptionProperty])}}},setTimeout:function(e,c,f){var d=this;return(e&&window.setTimeout(function(){e.apply(d,c||[])},f||0))},imageFactory:function(e,m){var h=this;var g=this.imagePrototype.cloneNode(false);var c=e;var k=this.options.stretchImages;var j;var f;var i;var l;function d(n){if(!j){n={type:n.type,target:f};if(!f.parentNode){return h.setTimeout(d,[n])}j=true;b(g).off("load error",d);if(k){if(n.type==="load"){f.style.background='url("'+c+'") center no-repeat';f.style.backgroundSize=k}}m(n)}}if(typeof c!=="string"){c=this.getItemProperty(e,this.options.urlProperty);i=this.getItemProperty(e,this.options.titleProperty);l=this.getItemProperty(e,this.options.descriptionProperty)}if(k===true){k="contain"}k=this.support.backgroundSize&&this.support.backgroundSize[k]&&k;if(k){f=this.elementPrototype.cloneNode(false)}else{f=g;g.draggable=false}if(i){f.title=i}if(l){f.description=l}b(g).on("load error",d);g.src=c;return f},createElement:function(f,h){var e=f&&this.getItemProperty(f,this.options.typeProperty);var c=(e&&this[e.split("/")[0]+"Factory"])||this.imageFactory;var d=f&&c.call(this,f,h);var g=this.getItemProperty(f,this.options.srcsetProperty);if(!d){d=this.elementPrototype.cloneNode(false);this.setTimeout(h,[{type:"error",target:d}])}if(g){d.setAttribute("srcset",g)}b(d).addClass(this.options.slideContentClass);return d},loadElement:function(c){if(!this.elements[c]){if(this.slides[c].firstChild){this.elements[c]=b(this.slides[c]).hasClass(this.options.slideErrorClass)?3:2}else{this.elements[c]=1;b(this.slides[c]).addClass(this.options.slideLoadingClass);this.slides[c].appendChild(this.createElement(this.list[c],this.proxyListener))}}},loadElements:function(e){var c=Math.min(this.num,this.options.preloadRange*2+1);var d=e;var f;for(f=0;f<c;f+=1){d+=f*(f%2===0?-1:1);d=this.circle(d);this.loadElement(d)}},unloadElements:function(c){var d,e;for(d in this.elements){if(this.elements.hasOwnProperty(d)){e=Math.abs(c-d);if(e>this.options.preloadRange&&e+this.options.preloadRange<this.num){this.unloadSlide(d);delete this.elements[d]}}}},addSlide:function(d){var c=this.slidePrototype.cloneNode(false);c.setAttribute("data-index",d);this.slidesContainer[0].appendChild(c);this.slides.push(c)},positionSlide:function(d){var c=this.slides[d];c.style.width=this.slideWidth+"px";if(this.support.transform){c.style.left=d*-this.slideWidth+"px";this.move(d,this.index>d?-this.slideWidth:this.index<d?this.slideWidth:0,0)}},initSlides:function(e){var c,d;if(!e){this.positions=[];this.positions.length=this.num;this.elements={};this.imagePrototype=document.createElement("img");this.elementPrototype=document.createElement("div");this.slidePrototype=document.createElement("div");b(this.slidePrototype).addClass(this.options.slideClass);this.slides=this.slidesContainer[0].children;c=this.options.clearSlides||this.slides.length!==this.num}this.slideWidth=this.container[0].offsetWidth;this.slideHeight=this.container[0].offsetHeight;this.slidesContainer[0].style.width=this.num*this.slideWidth+"px";if(c){this.resetSlides()}for(d=0;d<this.num;d+=1){if(c){this.addSlide(d)}this.positionSlide(d)}if(this.options.continuous&&this.support.transform){this.move(this.circle(this.index-1),-this.slideWidth,0);this.move(this.circle(this.index+1),this.slideWidth,0)}if(!this.support.transform){this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px"}},unloadSlide:function(d){var c,e;c=this.slides[d];e=c.firstChild;if(e!==null){c.removeChild(e)}},unloadAllSlides:function(){var d,c;for(d=0,c=this.slides.length;d<c;d++){this.unloadSlide(d)}},toggleControls:function(){var c=this.options.controlsClass;if(this.container.hasClass(c)){this.container.removeClass(c)}else{this.container.addClass(c)}},toggleSlideshow:function(){if(!this.interval){this.play()}else{this.pause()}},getNodeIndex:function(c){return parseInt(c.getAttribute("data-index"),10)},getNestedProperty:function(d,c){c.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(i,g,h,e,f){var j=f||g||h||(e&&parseInt(e,10));if(i&&d){d=d[j]}});return d},getDataProperty:function(e,d){var c;var g;if(e.dataset){c=d.replace(/-([a-z])/g,function(i,h){return h.toUpperCase()});g=e.dataset[c]}else{if(e.getAttribute){g=e.getAttribute("data-"+d.replace(/([A-Z])/g,"-$1").toLowerCase())}}if(typeof g==="string"){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(g)){try{return b.parseJSON(g)}catch(f){}}return g}},getItemProperty:function(d,c){var e=this.getDataProperty(d,c);if(e===undefined){e=d[c]}if(e===undefined){e=this.getNestedProperty(d,c)}return e},initStartIndex:function(){var c=this.options.index;var e=this.options.urlProperty;var d;if(c&&typeof c!=="number"){for(d=0;d<this.num;d+=1){if(this.list[d]===c||this.getItemProperty(this.list[d],e)===this.getItemProperty(c,e)){c=d;break}}}this.index=this.circle(parseInt(c,10)||0)},initEventListeners:function(){var c=this;var d=this.slidesContainer;function e(g){var f=c.support.transition&&c.support.transition.end===g.type?"transitionend":g.type;if(typeof c["on"+f]==="function"){c["on"+f](g)}}b(window).on("resize",e);b(document.body).on("keydown",e);this.container.on("click",e);if(this.support.touch){d.on("touchstart touchmove touchend touchcancel",e)}else{if(this.options.emulateTouchEvents&&this.support.transition){d.on("mousedown mousemove mouseup mouseout",e)}}if(this.support.transition){d.on(this.support.transition.end,e)}this.proxyListener=e},destroyEventListeners:function(){var c=this.slidesContainer;var d=this.proxyListener;b(window).off("resize",d);b(document.body).off("keydown",d);this.container.off("click",d);if(this.support.touch){c.off("touchstart touchmove touchend touchcancel",d)}else{if(this.options.emulateTouchEvents&&this.support.transition){c.off("mousedown mousemove mouseup mouseout",d)}}if(this.support.transition){c.off(this.support.transition.end,d)}},handleOpen:function(){if(this.options.onopened){this.options.onopened.call(this)}},initWidget:function(){var d=this;function c(e){if(e.target===d.container[0]){d.container.off(d.support.transition.end,c);d.handleOpen()}}this.container=b(this.options.container);if(!this.container.length){this.console.log("blueimp Gallery: Widget container not found.",this.options.container);return false}this.slidesContainer=this.container.find(this.options.slidesContainer).first();if(!this.slidesContainer.length){this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer);return false}this.titleElement=this.container.find(this.options.titleElement).first();this.descriptionElement=this.container.find(this.options.descriptionElement).first();if(this.num===1){this.container.addClass(this.options.singleClass)}if(this.options.onopen){this.options.onopen.call(this)}if(this.support.transition&&this.options.displayTransition){this.container.on(this.support.transition.end,c)}else{this.handleOpen()}if(this.options.hidePageScrollbars){this.bodyOverflowStyle=document.body.style.overflow;document.body.style.overflow="hidden"}this.container[0].style.display="flex";this.initSlides();this.container.addClass(this.options.displayClass);this.captionElement=this.container.find(this.options.captionElement);if(this.num<10){this.container.find(this.options.captionElementAll).html("0"+this.num)}else{this.container.find(this.options.captionElementAll).html(this.num)}},initOptions:function(c){this.options=b.extend({},this.options);if((c&&c.carousel)||(this.options.carousel&&(!c||c.carousel!==false))){b.extend(this.options,this.carouselOptions)}b.extend(this.options,c);if(this.num<3){this.options.continuous=this.options.continuous?null:false}if(!this.support.transition){this.options.emulateTouchEvents=false}if(this.options.event){this.preventDefault(this.options.event)}},http_build_query:function(d,k,c){var h,j,f,g=0,e=[];if(!c){c="&"}for(h in d){f=encodeURIComponent(h);j=encodeURIComponent(d[h].toString()).replace(/%20/g,"+");if(k&&!isNaN(h)){f=k+g}e[g]=f+"="+j;g++}return e.join(c)},});return a});